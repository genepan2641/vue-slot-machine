webpackJsonp([1],{"48c9":function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("7+uW"),s=i("fZjL"),r=i.n(s),a={props:{secondsToStop:{type:Number,default:3500},secondsToEnd:{type:Number,default:3e3},targetPrize:{type:Number},allowPlay:{type:Boolean},prizeLength:{type:Number},prizeSet:{type:Object}},data:function(){return{itemSetCount:1,gameStatus:0,currentItem:1,speed:0,itemHeight:82}},computed:{targetItem:function(){return(Math.ceil(this.currentItem/this.prizeLength)+2)*this.prizeLength+this.targetPrize}},watch:{currentItem:function(){this.currentItem>this.prizeLength*this.itemSetCount-1&&(this.itemSetCount+=4)}},mounted:function(){var t=this;setTimeout(function(){console.log(document.querySelector(".slot-machine__prize-frame").clientHeight),t.itemHeight=document.querySelector(".slot-machine__prize-frame").clientHeight/3},100)},methods:{stop:function(){var t=this;clearInterval(this.animate),this.gameStatus=2,this.currentItem=this.targetItem,setTimeout(function(){t.gameStatus=3},this.secondsToEnd+200),setTimeout(function(){t.$emit("game-ends")},this.secondsToEnd+500)},go:function(){var t=this;clearInterval(this.animate),this.gameStatus=1,this.animate=setInterval(function(){t.currentItem+=t.speed,t.speed<1&&(t.speed+=2)},60),setTimeout(function(){1==t.gameStatus&&t.stop()},this.secondsToStop)},reset:function(){this.allowPlay&&(this.currentItem=1,this.gameStatus=0,this.speed=0,this.itemSetCount=1)},listPositionStyle:function(){return{transform:this.currentItem<2?"translateY(0px)":"translateY("+((this.currentItem-1)*this.itemHeight-this.itemHeight)+"px)"}},listTransition:function(){switch(this.gameStatus){case 1:return{transition:"1000ms all ease-out"};case 2:return{transition:this.secondsToEnd+"ms all cubic-bezier(.25,1.31,.33,.95)"}}},prizeItemStyle:function(){return{height:this.itemHeight+"px"}},prizeMaskStyle:function(){return{height:3*this.itemHeight+"px"}},isTargetPrize:function(t){return 3==this.gameStatus&&t==this.currentItem}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"slot-machine"},[i("div",{staticClass:"slot-machine__prize-frame"},[i("div",{staticClass:"slot-machine__prize-list",style:[t.listTransition(),t.listPositionStyle()]},t._l(t.itemSetCount,function(e){return i("div",{key:"setNo"+e},t._l(t.prizeSet,function(n,s){return i("div",{key:"setItem"+(Object.keys(t.prizeSet).length+1-s),staticClass:"prize",class:{"prize--target":t.isTargetPrize((t.itemSetCount-e)*t.prizeLength+Object.keys(t.prizeSet).length+1-s)},style:t.prizeItemStyle()},[i("span",[t._v(t._s(t.prizeSet[Object.keys(t.prizeSet).length+1-s])+" \n                        "),i("span",{staticClass:"hint"},[t._v("(第 "+t._s((t.itemSetCount-e)*t.prizeLength+Object.keys(t.prizeSet).length+1-s)+" 個 item)")])])])}))})),t._v(" "),0==t.gameStatus?i("div",{staticClass:"slot-machine__mask"},[t.allowPlay?i("span",[t._v("點擊按鈕開始!")]):t._e()]):t._e()]),t._v(" "),i("div",{staticClass:"slot-machine__handle-wrapper"},[0==t.gameStatus?i("button",{on:{click:t.go}},[t._v("start game!")]):t._e(),t._v(" "),3==t.gameStatus?i("button",{on:{click:t.reset}},[t._v("reset game")]):t._e()])])},staticRenderFns:[]};var c={data:function(){return{seconds:4,allowPlay:!0,secondsToStop:1500,secondsToEnd:3e3,targetPrize:1,prizeSet:{1:"一獎",2:"二獎",3:"三獎",4:"四獎"}}},computed:{prizeLength:function(){return r()(this.prizeSet).length}},watch:{seconds:{handler:function(t){console.log(Number(t)),this.secondsToStop=1e3*Number(t)-this.secondsToEnd},immediate:!0}},name:"App",components:{Game:i("VU/8")(a,o,!1,function(t){i("48c9")},"data-v-58d333f8",null).exports}},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container",attrs:{id:"app"}},[i("div",{staticClass:"flex-box"},[i("div",{staticClass:"flex-1"},[i("div",[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.seconds,expression:"seconds",modifiers:{number:!0}}],attrs:{type:"range",min:"4",max:"10",step:"0.5"},domProps:{value:t.seconds},on:{__r:function(e){t.seconds=t._n(e.target.value)},blur:function(e){t.$forceUpdate()}}}),t._v("\n        "+t._s(t.seconds)+" 秒後停止\n      ")]),t._v(" "),t._l(t.prizeSet,function(e,n){return i("label",{attrs:{for:"prize"+e}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.targetPrize,expression:"targetPrize"}],attrs:{id:"prize"+e,type:"radio"},domProps:{value:Number(n),checked:t._q(t.targetPrize,Number(n))},on:{change:function(e){t.targetPrize=Number(n)}}}),t._v("\n        "+t._s(e)+"\n      ")])})],2),t._v(" "),i("div",{staticClass:"flex-1"},[i("game",{attrs:{"allow-play":t.allowPlay,"prize-length":t.prizeLength,"target-prize":t.targetPrize,"seconds-to-stop":t.secondsToStop,"seconds-to-end":t.secondsToEnd,"prize-set":t.prizeSet}})],1)])])},staticRenderFns:[]};var l=i("VU/8")(c,u,!1,function(t){i("X3iu")},null,null).exports;n.a.config.productionTip=!1,new n.a({el:"#app",components:{App:l},template:"<App/>"})},X3iu:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.be95a17770504662d1ce.js.map